<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GRAPES: peersampler.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GRAPES
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">peersampler.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Peer Sampler interface.  
<a href="#details">More...</a></p>

<p><a href="peersampler_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct nodeID *const *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#ab84acf92c069bca078e8080721925938">psample_get_cache</a> (struct psample_context *tc, int *n)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a sample of the active peers.  <a href="#ab84acf92c069bca078e8080721925938"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#a11cbc4de7119ec28463321fac3d72a23">psample_get_metadata</a> (struct psample_context *tc, int *metadata_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the peer's metadata.  <a href="#a11cbc4de7119ec28463321fac3d72a23"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#a493808c379220200cc75a4d65ed960ed">psample_grow_cache</a> (struct psample_context *tc, int n)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Increase the cache size.  <a href="#a493808c379220200cc75a4d65ed960ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#a9f9a3ce32109cc6c85962b58fd9588ae">psample_shrink_cache</a> (struct psample_context *tc, int n)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrease the cache size.  <a href="#a9f9a3ce32109cc6c85962b58fd9588ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#a899f1c2e48232631cac9c510e5815283">psample_remove_peer</a> (struct psample_context *tc, const struct nodeID *neighbour)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a peer from the cache.  <a href="#a899f1c2e48232631cac9c510e5815283"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#a7cb548afc914c11d1053f0382019eda4">psample_change_metadata</a> (struct psample_context *tc, const void *metadata, int metadata_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the metadata.  <a href="#a7cb548afc914c11d1053f0382019eda4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct psample_context *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#ae727e8be9d2f4492094fc993f16d3cf8">psample_init</a> (struct nodeID *myID, const void *metadata, int metadata_size, const char *config)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the Peer Sampler.  <a href="#ae727e8be9d2f4492094fc993f16d3cf8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#a6c7f84277fa81df4327cdb3e7f6b16fc">psample_add_peer</a> (struct psample_context *tc, struct nodeID *neighbour, const void *metadata, int metadata_size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert a known peer in the cache.  <a href="#a6c7f84277fa81df4327cdb3e7f6b16fc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="peersampler_8h.html#a9aa28fd02b8f72dbfbde587c6153cd47">psample_parse_data</a> (struct psample_context *tc, const uint8_t *buff, int len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pass a received packet to the Peer Sampler.  <a href="#a9aa28fd02b8f72dbfbde587c6153cd47"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Peer Sampler interface. </p>
<p>This is the Peer Sampler interface. See <a class="el" href="topology_test_8c-example.html">topology_test.c </a> for a simple usage example, <a class="el" href="topology_test_th_8c-example.html">topology_test_th.c </a> for an example using multiple threads, and <a class="el" href="topology_test_attr_8c-example.html">topology_test_attr.c </a> for an example with metadata. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a6c7f84277fa81df4327cdb3e7f6b16fc"></a><!-- doxytag: member="peersampler.h::psample_add_peer" ref="a6c7f84277fa81df4327cdb3e7f6b16fc" args="(struct psample_context *tc, struct nodeID *neighbour, const void *metadata, int metadata_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="peersampler_8h.html#a6c7f84277fa81df4327cdb3e7f6b16fc">psample_add_peer</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nodeID *&#160;</td>
          <td class="paramname"><em>neighbour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>metadata_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert a known peer in the cache. </p>
<p>This function can be used to add a specified peer to the cache. It is useful in the bootstrap phase. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">neighbour</td><td>the id of the peer to be added to the cache. </td></tr>
    <tr><td class="paramname">metadata</td><td>pointer to the metadata associated to the new peer (will be gossiped). </td></tr>
    <tr><td class="paramname">metadata_size</td><td>size of the metadata associated to the new peer (must be the same as for the other peers). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 in case of success; -1 in case of error. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="topology_test_8c-example.html#a9">topology_test.c</a>, <a class="el" href="topology_test_attr_8c-example.html#a11">topology_test_attr.c</a>, and <a class="el" href="topology_test_th_8c-example.html#a8">topology_test_th.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a7cb548afc914c11d1053f0382019eda4"></a><!-- doxytag: member="peersampler.h::psample_change_metadata" ref="a7cb548afc914c11d1053f0382019eda4" args="(struct psample_context *tc, const void *metadata, int metadata_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="peersampler_8h.html#a7cb548afc914c11d1053f0382019eda4">psample_change_metadata</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>metadata_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change the metadata. </p>
<p>This function can be used to modify/update the metadata for a peer. Because of security concerns, only the metadata for the local peer can be modified. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">metadata</td><td>pointer to the new metadata associated to the peer (will be gossiped). </td></tr>
    <tr><td class="paramname">metadata_size</td><td>size of the metadata associated to the peer (must be the same as for the other peers). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 in case of success; -1 in case of error. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="topology_test_attr_8c-example.html#a4">topology_test_attr.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ab84acf92c069bca078e8080721925938"></a><!-- doxytag: member="peersampler.h::psample_get_cache" ref="ab84acf92c069bca078e8080721925938" args="(struct psample_context *tc, int *n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct nodeID* const* <a class="el" href="peersampler_8h.html#ab84acf92c069bca078e8080721925938">psample_get_cache</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a sample of the active peers. </p>
<p>This function returns the current peer sampler cache (i.e., the set of known peers), and its size. Note that the current cache size can be different from the requested one, because of how the peer sampling protocols work.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">n</td><td>pointer to an integer where the cache size is returned. Is set to -1 in case of error, or 0 if the cache is empty. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to an array of nodeID describing a random view of the system. NULL in case of error, or if the cache is empty. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="topology_test_8c-example.html#a6">topology_test.c</a>, <a class="el" href="topology_test_attr_8c-example.html#a9">topology_test_attr.c</a>, and <a class="el" href="topology_test_th_8c-example.html#a3">topology_test_th.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a11cbc4de7119ec28463321fac3d72a23"></a><!-- doxytag: member="peersampler.h::psample_get_metadata" ref="a11cbc4de7119ec28463321fac3d72a23" args="(struct psample_context *tc, int *metadata_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void* <a class="el" href="peersampler_8h.html#a11cbc4de7119ec28463321fac3d72a23">psample_get_metadata</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>metadata_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the peer's metadata. </p>
<p>Each known peer can have some opaque metadata attached to it, and such metadata is gossiped together with the nodeIDs. This function returns the metadata currently associated to the known peers, and the size of each object composing the metadata (metadata have the same structure for all the peers, so such size is constant). The number of known peers (cache size) can be known by calling <a class="el" href="peersampler_8h.html#ab84acf92c069bca078e8080721925938" title="Get a sample of the active peers.">psample_get_cache()</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">metadata_size</td><td>pointer to an integer where the size of the metadata associated to each peer is returned. Is set to -1 in case of error, or 0 if the cache is empty. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to an array of metadata (ordered as the peers returned by <a class="el" href="peersampler_8h.html#ab84acf92c069bca078e8080721925938" title="Get a sample of the active peers.">psample_get_cache()</a>). NULL in case of error, or if the cache is empty. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="topology_test_attr_8c-example.html#a10">topology_test_attr.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a493808c379220200cc75a4d65ed960ed"></a><!-- doxytag: member="peersampler.h::psample_grow_cache" ref="a493808c379220200cc75a4d65ed960ed" args="(struct psample_context *tc, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="peersampler_8h.html#a493808c379220200cc75a4d65ed960ed">psample_grow_cache</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Increase the cache size. </p>
<p>This function can be used to increase the number of known peers (that is, the degree of the overlay graph) by a specified amount. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">n</td><td>number of peers by which the cache size must be incremented. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the new cache size in case of success; -1 in case of error. </dd></dl>

</div>
</div>
<a class="anchor" id="ae727e8be9d2f4492094fc993f16d3cf8"></a><!-- doxytag: member="peersampler.h::psample_init" ref="ae727e8be9d2f4492094fc993f16d3cf8" args="(struct nodeID *myID, const void *metadata, int metadata_size, const char *config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct psample_context* <a class="el" href="peersampler_8h.html#ae727e8be9d2f4492094fc993f16d3cf8">psample_init</a> </td>
          <td>(</td>
          <td class="paramtype">struct nodeID *&#160;</td>
          <td class="paramname"><em>myID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>metadata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>metadata_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialise the Peer Sampler. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">myID</td><td>the ID of this peer. </td></tr>
    <tr><td class="paramname">metadata</td><td>pointer to the metadata associated to this peer (will be gossiped). </td></tr>
    <tr><td class="paramname">metadata_size</td><td>size of the metadata associated to this peer. </td></tr>
    <tr><td class="paramname">config</td><td>configuration parameter for the peer sampling module (specifying the peer sampling algorithm, the cache size, etc...) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the topology manager context in case of success; NULL in case of error. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="topology_test_8c-example.html#a1">topology_test.c</a>, <a class="el" href="topology_test_attr_8c-example.html#a2">topology_test_attr.c</a>, and <a class="el" href="topology_test_th_8c-example.html#a1">topology_test_th.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a9aa28fd02b8f72dbfbde587c6153cd47"></a><!-- doxytag: member="peersampler.h::psample_parse_data" ref="a9aa28fd02b8f72dbfbde587c6153cd47" args="(struct psample_context *tc, const uint8_t *buff, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="peersampler_8h.html#a9aa28fd02b8f72dbfbde587c6153cd47">psample_parse_data</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pass a received packet to the Peer Sampler. </p>
<p>This function passes to the Peer Sampler a packet that has been received from the network. The Peer Sampler will parse such packet and run the protocol, adding or removing peers to the cache, and sending peer sampling messages to other peers. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">buff</td><td>a memory buffer containing the received message. </td></tr>
    <tr><td class="paramname">len</td><td>the size of such a memory buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 in case of success; -1 in case of error. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="topology_test_8c-example.html#a2">topology_test.c</a>, <a class="el" href="topology_test_attr_8c-example.html#a6">topology_test_attr.c</a>, and <a class="el" href="topology_test_th_8c-example.html#a2">topology_test_th.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a899f1c2e48232631cac9c510e5815283"></a><!-- doxytag: member="peersampler.h::psample_remove_peer" ref="a899f1c2e48232631cac9c510e5815283" args="(struct psample_context *tc, const struct nodeID *neighbour)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="peersampler_8h.html#a899f1c2e48232631cac9c510e5815283">psample_remove_peer</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct nodeID *&#160;</td>
          <td class="paramname"><em>neighbour</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove a peer from the cache. </p>
<p>This function can be used to remove a specified peer from the cache. Note that the requested cache size is not modified, so the peer will be soon replaced by a different one. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">neighbour</td><td>the id of the peer to be removed from the cache. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 in case of success; -1 in case of error. </dd></dl>

</div>
</div>
<a class="anchor" id="a9f9a3ce32109cc6c85962b58fd9588ae"></a><!-- doxytag: member="peersampler.h::psample_shrink_cache" ref="a9f9a3ce32109cc6c85962b58fd9588ae" args="(struct psample_context *tc, int n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="peersampler_8h.html#a9f9a3ce32109cc6c85962b58fd9588ae">psample_shrink_cache</a> </td>
          <td>(</td>
          <td class="paramtype">struct psample_context *&#160;</td>
          <td class="paramname"><em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decrease the cache size. </p>
<p>This function can be used to reduce the number of known peers (that is, the degree of the overlay graph) by a specified amount. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tc</td><td>the pointer to the current topology manager instance context </td></tr>
    <tr><td class="paramname">n</td><td>number of peers by which the cache size must be decreased. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the new cache size in case of success; -1 in case of error. </dd></dl>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Fri May 3 2013 10:18:23 for GRAPES by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
