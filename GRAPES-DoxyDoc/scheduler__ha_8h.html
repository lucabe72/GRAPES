<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GRAPES: scheduler_ha.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">GRAPES
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">scheduler_ha.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Scheduling functions for chunk and peer selection.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;scheduler_common.h&quot;</code><br/>
</div>
<p><a href="scheduler__ha_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scheduler__ha_8h.html#aa9a2c070dd205a1280fc49dac145ac63">schedInit</a> (char *cfg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scheduler__ha_8h.html#ad5dad960b5d685aa4555c05930d4155c">schedSelectPushList</a> (schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scheduler__ha_8h.html#ad65eaf8edbc62927a9a21c018a4ec722">schedSelectRequestList</a> (schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scheduler__ha_8h.html#addbd6f128d5d2656072150c9e0c6390e">schedSelectOfferList</a> (schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scheduler__ha_8h.html#a702d65d6e20001be0495980b929326a6">schedSelectProposeList</a> (schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scheduler__ha_8h.html#a62a2cbfd7221e3101873629227e7c4f6">schedSelectAcceptList</a> (schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Scheduling functions for chunk and peer selection. </p>
<p>The chunk &amp; peer scheduler (or simply ``scheduler'') is responsible for selecting a list of peer-chunk pairs whenever chunks or trade messages are to be sent. It can e.g. select destination peers and chunks to be sent when push streaming is used, or the peer to request from and the list of chunks to ask for when pull mode operation is required. Note that in this design the scheduler has nothing to do with the timing (it does not decide when to send chunks, but only decides which chunks to send/reqest/offer/propose/accept and the destination/source peer). Hence, the scheduler is non-blocking and has to be invoked at the correct time.</p>
<p>The scheduler uses:</p>
<ul>
<li>information about the neighbourhood and its state: hence, it directly communicates with the NeighborhoodList;</li>
<li>information about the chunks currently contained in the chunk buffer: hence, it directly interacts with the chunk buffer. </li>
</ul>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa9a2c070dd205a1280fc49dac145ac63"></a><!-- doxytag: member="scheduler_ha.h::schedInit" ref="aa9a2c070dd205a1280fc49dac145ac63" args="(char *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="scheduler__ha_8h.html#aa9a2c070dd205a1280fc49dac145ac63">schedInit</a> </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the scheduler</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cfg</td><td>configuration string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a62a2cbfd7221e3101873629227e7c4f6"></a><!-- doxytag: member="scheduler_ha.h::schedSelectAcceptList" ref="a62a2cbfd7221e3101873629227e7c4f6" args="(schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="scheduler__ha_8h.html#a62a2cbfd7221e3101873629227e7c4f6">schedSelectAcceptList</a> </td>
          <td>(</td>
          <td class="paramtype">schedPeerID *&#160;</td>
          <td class="paramname"><em>peers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peers_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">schedChunkID *&#160;</td>
          <td class="paramname"><em>chunks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chunks_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct PeerChunk *&#160;</td>
          <td class="paramname"><em>selected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>selected_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Select chunks to accept based on proposals.</p>
<p>This selection function which proposed chunks to ask for.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">peers</td><td>list of peers to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peers_len</td><td>length of the peers list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks</td><td>list of chunks to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks_len</td><td>length of the chunks list </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">selected</td><td>ordered list of peer-chunk pairs selected </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">selected_len</td><td>in: maximum number of selectable pairs, also defines the allocated space for selected. out: length of the selected list </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="addbd6f128d5d2656072150c9e0c6390e"></a><!-- doxytag: member="scheduler_ha.h::schedSelectOfferList" ref="addbd6f128d5d2656072150c9e0c6390e" args="(schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="scheduler__ha_8h.html#addbd6f128d5d2656072150c9e0c6390e">schedSelectOfferList</a> </td>
          <td>(</td>
          <td class="paramtype">schedPeerID *&#160;</td>
          <td class="paramname"><em>peers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peers_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">schedChunkID *&#160;</td>
          <td class="paramname"><em>chunks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chunks_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct PeerChunk *&#160;</td>
          <td class="paramname"><em>selected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>selected_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Select what to offer based on the requests that arrived.</p>
<p>In a simple pull model, all requests are served, therefore no selection is needed on the sender side. In a more sophisicated model, the sender side should evaluate requests that have arrived and select the ones that are satisfied. This selection funciton is to</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">peers</td><td>list of peers to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peers_len</td><td>length of the peers list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks</td><td>list of chunks to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks_len</td><td>length of the chunks list </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">selected</td><td>ordered list of peer-chunk pairs selected </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">selected_len</td><td>in: maximum number of OCselectable pairs, also defines the allocated space for selected. out: length of the selected list </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a702d65d6e20001be0495980b929326a6"></a><!-- doxytag: member="scheduler_ha.h::schedSelectProposeList" ref="a702d65d6e20001be0495980b929326a6" args="(schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="scheduler__ha_8h.html#a702d65d6e20001be0495980b929326a6">schedSelectProposeList</a> </td>
          <td>(</td>
          <td class="paramtype">schedPeerID *&#160;</td>
          <td class="paramname"><em>peers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peers_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">schedChunkID *&#160;</td>
          <td class="paramname"><em>chunks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chunks_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct PeerChunk *&#160;</td>
          <td class="paramname"><em>selected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>selected_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Select chunks to propose to other peers.</p>
<p>This selection function decides which chunks to propose to which peers. In this case first a decision is made at the peer initiating the transaction about the set of peers it is willing to send to the other peer.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">peers</td><td>list of peers to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peers_len</td><td>length of the peers list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks</td><td>list of chunks to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks_len</td><td>length of the chunks list </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">selected</td><td>ordered list of peer-chunk pairs selected </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">selected_len</td><td>in: maximum number of selectable pairs, also defines the allocated space for selected. out: length of the selected list </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad5dad960b5d685aa4555c05930d4155c"></a><!-- doxytag: member="scheduler_ha.h::schedSelectPushList" ref="ad5dad960b5d685aa4555c05930d4155c" args="(schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="scheduler__ha_8h.html#ad5dad960b5d685aa4555c05930d4155c">schedSelectPushList</a> </td>
          <td>(</td>
          <td class="paramtype">schedPeerID *&#160;</td>
          <td class="paramname"><em>peers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peers_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">schedChunkID *&#160;</td>
          <td class="paramname"><em>chunks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chunks_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct PeerChunk *&#160;</td>
          <td class="paramname"><em>selected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>selected_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Select a list of peer-chunk pairs for sending.</p>
<p>In a simple push model, chunks are sent to peers without further messaging. This selection function selects the chunk-peer pairs for this simple pull operation.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">peers</td><td>list of peers to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peers_len</td><td>length of the peers list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks</td><td>list of chunks to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks_len</td><td>length of the chunks list </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">selected</td><td>ordered list of peer-chunk pairs selected </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">selected_len</td><td>in: maximum number of selectable pairs, also defines the allocated space for selected. out: length of the selected list </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad65eaf8edbc62927a9a21c018a4ec722"></a><!-- doxytag: member="scheduler_ha.h::schedSelectRequestList" ref="ad65eaf8edbc62927a9a21c018a4ec722" args="(schedPeerID *peers, int peers_len, schedChunkID *chunks, int chunks_len, struct PeerChunk *selected, int *selected_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="scheduler__ha_8h.html#ad65eaf8edbc62927a9a21c018a4ec722">schedSelectRequestList</a> </td>
          <td>(</td>
          <td class="paramtype">schedPeerID *&#160;</td>
          <td class="paramname"><em>peers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>peers_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">schedChunkID *&#160;</td>
          <td class="paramname"><em>chunks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chunks_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct PeerChunk *&#160;</td>
          <td class="paramname"><em>selected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>selected_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Select what chunks to request from which peers.</p>
<p>In a pull model, chunk requests shuold be explicitly signaled. This selection function serves to select the peer-chunk combinations for such requests. E.g. one well known implementation of this selection creates a partitioning of the missing chunk set and assigns a peer to each of these subsets.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">peers</td><td>list of peers to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">peers_len</td><td>length of the peers list </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks</td><td>list of chunks to choose from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chunks_len</td><td>length of the chunks list </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">selected</td><td>ordered list of peer-chunk pairs selected </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">selected_len</td><td>in: maximum number of selectable pairs, also defines the allocated space for selected. out: length of the selected list </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Fri May 3 2013 10:18:23 for GRAPES by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
